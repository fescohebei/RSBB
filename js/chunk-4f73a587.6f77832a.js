(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f73a587","chunk-2d0e1a13"],{"7af9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{visible:this.visible.show,width:450,destroyOnClose:!0,closable:!1,title:"多批次工资表"},on:{close:t.onClose}},[a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,size:"middle",rowKey:t.rowKey}})],1)},o=[],l=[{title:"批次",dataIndex:"BatchName"},{title:"年",dataIndex:"PayrollYear"},{title:"月",dataIndex:"PayrollMonth"}],s={props:{show:{type:Object,default:{show:!1}}},data:function(){return{visible:{show:!1},columns:l,dataSource:[]}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.dataSource=e.record})},methods:{onClose:function(){this.visible.show=!1,this.dataSource=[]},rowKey:function(t){return t.PayrollColGuid}}},n=s,i=a("2877"),c=Object(i["a"])(n,r,o,!1,null,null,null);e["default"]=c.exports},9444:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{visible:this.visible.show,width:750,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[a("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),a("a-button",{staticStyle:{float:"right","margin-right":"5px",color:"#409EFF"},attrs:{size:"small",icon:"cloud-download"},on:{click:t.btnExport}},[t._v("导出")]),t.record.Confirm?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"5px",color:"red"},attrs:{size:"small",icon:"delete"},on:{click:t.btnDelete}},[t._v("删除")]),t.record.Confirm?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"5px",color:"green"},attrs:{size:"small",icon:"check-square"},on:{click:t.btnConfirm}},[t._v("确认")])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("导入时间:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.ImportDate))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("批次名称:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.BatchName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("发放月:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.PayrollYear)+"年"+t._s(t.record.PayrollMonth)+"月")]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("状态:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.Confirm?"已确认":"未确认"))])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v("员工列表")]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,pagination:!0,size:"middle",rowKey:t.rowKey}}),a("drawer-delerr",{attrs:{show:t.drawer.delerr}})],2)},o=[],l=a("b775"),s=a("7af9"),n=[{title:"姓名",dataIndex:"PName"},{title:"身份证号",dataIndex:"IDCard"},{title:"累计专项",dataIndex:"累计专项扣除"},{title:"累计专项附加",dataIndex:"累计专项附加扣除"},{title:"累计已扣税额",dataIndex:"累计已预扣预缴税额"},{title:"本月应缴税额",dataIndex:"本期应预扣预缴税额"}],i={components:{DrawerDelerr:s["default"]},props:{show:{type:Object,default:{show:!1}},title:{type:String,default:""},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1},record:{},columns:n,dataSource:[],drawer:{delerr:{show:!1,record:null}}}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.record=e.record,t.init()})},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh()},btnExport:function(){var t=this,e=document.createElement("a");e.href="/api/Salary/Payroll/ExportPayroll?PayrollColGuid="+t.show.record.PayrollColGuid,e.click()},btnDelete:function(){var t=this;l["a"].post("/api/Salary/Payroll/DeletePayroll",{PayrollColGuid:t.show.record.PayrollColGuid}).then(function(e){var a=e;0===a.code?a.data.length>0?t.drawer.delerr={show:!0,record:a.data}:(t.onClose(),t.$message.success("已删除")):t.$message.error(a.msg)}).catch(function(e){t.$message.error("网络异常"),console.log(e)})},btnConfirm:function(){var t=this;l["a"].post("/api/Salary/Payroll/ConfirmPayroll",{PayrollColGuid:t.show.record.PayrollColGuid}).then(function(e){var a=e;0===a.code?(t.record.Confirm=!0,t.$message.success("已确认")):t.$message.error(a.msg)}).catch(function(e){t.$message.error("网络异常"),console.log(e)})},init:function(){var t=this;l["a"].post("/api/Salary/Payroll/PayrollDetail",{PayrollColGuid:t.show.record.PayrollColGuid}).then(function(e){var a=e;0===a.code&&(t.dataSource=a.data)}).catch(function(t){console.log(t)})},rowKey:function(t){return t.PayrollGuid}}},c=i,d=a("2877"),u=Object(d["a"])(c,r,o,!1,null,null,null);e["default"]=u.exports}}]);