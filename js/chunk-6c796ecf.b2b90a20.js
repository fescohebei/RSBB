(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c796ecf","chunk-2d23050e","chunk-2d22ca77"],{"0b68":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",[a("a-layout-content",[a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:"fold"},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:8}},[a("a-form-item",{attrs:{label:"所属月份",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-month-picker",{attrs:{placeholder:"月份"},model:{value:t.formSearch.Date,callback:function(e){t.$set(t.formSearch,"Date",e)},expression:"formSearch.Date"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.btnReset}},[t._v("重置")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"cloud-upload"},on:{click:t.btnUpload}},[t._v("上传")])],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",[a("span",{staticStyle:{color:"red"}},[t._v("注意：此表需每月上传一次")])])],1)],1)],1)])],1),a("div",[a("div",{staticClass:"alert"},[a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{attrs:{slot:"message"},slot:"message"},[t._v("\n              总共 \n              "),a("a",{staticStyle:{"font-weight":"600"}},[t._v(t._s(t.formSearch.total))]),t._v("\n               批次个税专项附加表\n            ")])])],1)]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,pagination:!1,rowKey:t.rowKey},scopedSlots:t._u([{key:"NianYue",fn:function(e){return[t._v(t._s(e.DeductYear)+"年"+t._s(e.DeductMonth)+"月")]}},{key:"Status",fn:function(e){return[t._v(t._s(e.Confirm?"已确认":"未确认"))]}},{key:"Operation",fn:function(e){return[a("a-tag",{on:{click:function(a){return t.showdetail(e)}}},[t._v("详情")])]}}])},[a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2)],1)],1),a("drawer-upload",{attrs:{show:t.drawer.upload,refresh:t.init}}),a("drawer-detail",{attrs:{show:t.drawer.detail,refresh:t.init,title:t.drawer.detail.title}})],1)},o=[],n=a("b775"),i=a("f3c7"),s=a("ec82"),l=(a("1c46"),[{title:"所属月份",scopedSlots:{customRender:"NianYue"}},{title:"导入时间",dataIndex:"Createdate"},{title:"状态",scopedSlots:{customRender:"Status"}},{title:"操作",scopedSlots:{customRender:"Operation"}}]),c=[],u={components:{DrawerUpload:i["default"],DrawerDetail:s["default"]},data:function(){return{formSearch:{pageSize:10,current:1,total:0},columns:l,dataSource:c,drawer:{upload:{show:!1},detail:{show:!1,record:null,title:""}}}},computed:{tableHeight:function(){return window.innerHeight-280}},methods:{init:function(){this.pagechange(1)},pagechange:function(t){var e=this;e.formSearch.current=t,n["a"].post("/api/Salary/Deduct/InitForDeduct",e.formSearch).then(function(t){var a=t;0===a.code&&(e.dataSource=a.data,e.formSearch.total=a.count)}).catch(function(t){console.log(t)})},btnUpload:function(){this.drawer.upload={show:!0}},btnReset:function(){this.formSearch.Date=null},rowKey:function(t){return t.PDCGuid},showdetail:function(t){this.drawer.detail={show:!0,record:t,title:t.DeductYear+"年"+t.DeductMonth+"专项附加表"}}},mounted:function(){var t=this;t.init()}},d=u,f=(a("4f25"),a("2877")),h=Object(f["a"])(d,r,o,!1,null,null,null);e["default"]=h.exports},"4f25":function(t,e,a){"use strict";var r=a("a75e"),o=a.n(r);o.a},a75e:function(t,e,a){},ec82:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{visible:this.visible.show,width:850,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[a("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),t.record.Confirm?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"5px",color:"red"},attrs:{size:"small",icon:"delete"},on:{click:t.btnDelete}},[t._v("删除")]),t.record.Confirm?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"5px",color:"green"},attrs:{size:"small",icon:"check-square"},on:{click:t.btnConfirm}},[t._v("确认")])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("导入时间:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.Createdate))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("状态:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.record.Confirm?"已确认":"未确认"))])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v("列表")]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,pagination:!0,size:"middle",rowKey:t.rowKey}})],2)},o=[],n=a("b775"),i=[{title:"姓名",dataIndex:"PName"},{title:"身份证号",dataIndex:"IDCard"},{title:"累计子女教育",dataIndex:"累计子女教育"},{title:"累计住房贷款利息",dataIndex:"累计住房贷款利息"},{title:"累计住房租金",dataIndex:"累计住房租金"},{title:"累计赡养老人",dataIndex:"累计赡养老人"},{title:"累计继续教育",dataIndex:"累计继续教育"}],s={props:{show:{type:Object,default:{show:!1}},title:{type:String,default:""},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1},record:{},columns:i,dataSource:[],drawer:{delerr:{show:!1,record:null}}}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.record=e.record,t.init()})},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh()},btnDelete:function(){var t=this;n["a"].post("/api/Salary/Deduct/DeleteDeduct",{PDCGuid:t.show.record.PDCGuid}).then(function(e){var a=e;0===a.code?(t.onClose(),t.$message.success("已删除")):t.$message.error(a.msg)}).catch(function(e){t.$message.error("网络异常"),console.log(e)})},btnConfirm:function(){var t=this;n["a"].post("/api/Salary/Deduct/ConfirmDeduct",{PDCGuid:t.show.record.PDCGuid}).then(function(e){var a=e;0===a.code?(t.record.Confirm=!0,t.$message.success("已确认")):t.$message.error(a.msg)}).catch(function(e){t.$message.error("网络异常"),console.log(e)})},init:function(){var t=this;n["a"].post("/api/Salary/Deduct/DeductDetail",{PDCGuid:t.show.record.PDCGuid}).then(function(e){var a=e;0===a.code&&(t.dataSource=a.data)}).catch(function(t){console.log(t)})},rowKey:function(t){return t.PDGuid}}},l=s,c=a("2877"),u=Object(c["a"])(l,r,o,!1,null,null,null);e["default"]=u.exports},f3c7:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{title:"上传个税专项附加表",visible:this.visible.show,width:350,destroyOnClose:!0},on:{close:t.onClose}},[a("a-spin",{attrs:{tip:"上传中",spinning:t.spinning}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"所属月份","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["NianYue",t.AFormImportRules.NianYue],expression:"['NianYue',AFormImportRules.NianYue]"}]})],1),a("a-form-item",[a("a-upload-dragger",{attrs:{name:"file",multiple:!1,action:"/api/Salary/Deduct/UploadFile",accept:".xls, .xlsx",showUploadList:!1,withCredentials:!0,beforeUpload:t.uploadbefore,data:t.FormImportData},on:{change:t.uploadchange}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[t._v("\n              将文件拖到此处，或\n              "),a("a-tag",{attrs:{color:"#2db7f5"}},[t._v("点击上传")])],1),a("p",{staticClass:"ant-upload-hint"},[t._v("只能上传xls/xlsx文件")])])],1)],1)],1),t.errdatarows.length>0?[a("a-divider",{attrs:{orientation:"left"}},[t._v("不规范数据")]),a("a-table",{attrs:{dataSource:t.errdatarows,columns:t.columns,bordered:!1,size:"middle",rowKey:t.rowKey},scopedSlots:t._u([{key:"err",fn:function(e){return[a("a-tag",{attrs:{color:"red"}},[t._v(t._s(e.错误原因))])]}}],null,!1,3464628469)})]:t._e(),[a("h3",{staticStyle:{"text-align":"center"}},[t._v("个税专项附加表获取步骤")]),a("a-timeline",{staticStyle:{margin:"14px"}},[a("a-timeline-item",[t._v("第一步：登陆 自然人税收管理系统扣缴客户端")]),a("a-timeline-item",[t._v("第二步：选择税款所属月份（例如预计算7月个人所得税选择7月）")]),a("a-timeline-item",[t._v("第三步：进入 综合所得申报 弹窗选择生成零工资记录，用户手工修改")]),a("a-timeline-item",[a("p",[t._v("第四步：点击预填专项附加扣除 弹窗选择如图")]),a("p",[a("img",{attrs:{src:"/images/预填专项附加扣除.jpg"}})])]),a("a-timeline-item",[t._v("第五步：点击导出选择导出全部")]),a("a-timeline-item",[t._v("第六步：将导出表上传至本页")])],1)]],2)},o=[],n=[{title:"姓名",dataIndex:"姓名"},{title:"身份证号",dataIndex:"证照号码"},{title:"错误原因",scopedSlots:{customRender:"err"}}],i={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{spinning:!1,form:this.$form.createForm(this),visible:{show:!1},FormImportData:{Nian:"",Yue:""},columns:n,AFormImportRules:{NianYue:{rules:[{required:!0,message:"请选择工资发放月份"}]}},errdatarows:[]}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.spinning=!1})},methods:{rowKey:function(t){return t.key},onClose:function(){this.visible.show=!1,this.FormImportData={Nian:"",Yue:""},this.refresh&&this.refresh()},uploadbefore:function(t){var e=this,a=!1;return this.form.validateFields(function(t,r){a=!t,a&&(e.FormImportData={Nian:r.NianYue.format("YYYY"),Yue:r.NianYue.format("MM")},e.spinning=!0)}),a},uploadchange:function(t){var e=t.file;t.fileList,t.event;if("done"==e.status){var a=e.response;console.log(a),a.code>0?(this.$message.error(a.msg),a.data&&(this.errdatarows=a.data)):(this.$message.success("导入成功"),this.onClose())}this.spinning=!1}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,o,!1,null,null,null);e["default"]=c.exports}}]);