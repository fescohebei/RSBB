(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0c9bad"],{"1b15":function(e,a,t){"use strict";var r=t("b335"),o=t.n(r);o.a},"401a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-layout",[t("a-layout-content",[t("a-card",{attrs:{bordered:!1}},[t("div",[t("a-form",{attrs:{layout:"horizontal"}},[t("div",{class:e.advanced?null:"fold"},[t("a-row",{attrs:{gutter:10}},[t("a-col",{attrs:{md:6}},[t("a-form-item",{attrs:{label:"员工姓名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.Keyword,callback:function(a){e.$set(e.formSearch,"Keyword",a)},expression:"formSearch.Keyword"}})],1)],1),t("a-col",{attrs:{md:6}},[t("a-form-item",{attrs:{label:"证件号码",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.IDCard,callback:function(a){e.$set(e.formSearch,"IDCard",a)},expression:"formSearch.IDCard"}})],1)],1),t("a-col",{attrs:{md:6}},[t("a-form-item",{attrs:{label:"状态",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-select",{attrs:{placeholder:"请选择",allowClear:!0},model:{value:e.formSearch.ShebaoOrderStatus,callback:function(a){e.$set(e.formSearch,"ShebaoOrderStatus",a)},expression:"formSearch.ShebaoOrderStatus"}},e._l(e.ShebaoOrderStatus,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1),t("a-col",{attrs:{md:1}},[t("a-form-item",{attrs:{label:"",labelCol:{span:0},wrapperCol:{span:24}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.initPage}},[e._v("查询")])],1)],1)],1)],1)])],1),t("div",[t("div",{staticClass:"operator"},[t("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:function(a){return e.edit({key:null})}}},[e._v("增员")]),e.selectedRows.length>0?t("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"danger"},on:{click:e.remove}},[e._v(e._s(1==e.selectedRows.length?"减员":"批量减员"))]):e._e()],1),t("div",{staticClass:"alert"},[t("a-alert",{attrs:{type:"info","show-icon":!0}},[t("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n              已选择 \n              "),t("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRows.length))]),e._v(" 项\n              "),t("a",{on:{click:e.unselect}},[e._v("清空")])])])],1)]),t("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect,getCheckboxProps:function(e){return{props:{disabled:e.Status>20}}}}},scopedSlots:e._u([{key:"Pname",fn:function(a){return t("a",{on:{click:function(t){return e.detail(a)}}},[e._v(e._s(a.PName))])}},{key:"ShebaoLabels",fn:function(a){return e._l(a.ShebaoStatus,function(a){return t("a-tag",{key:a.key,attrs:{color:"blue"}},[e._v(e._s(e.map.sbType[a.sbType]))])})}},{key:"Status",fn:function(a){return[t("a-tag",{attrs:{color:e.map.OrderStatusColor[a.Status]}},[e._v(e._s(e.map.OrderStatus[a.Status]))])]}},{key:"action",fn:function(a,r){return t("span",{staticStyle:{"text-align":"right"}},[t("a",{on:{click:function(a){return e.detail(r)}}},[e._v("详情")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-dropdown",[t("a",{staticClass:"ant-dropdown-link"},[e._v("\n              更多\n              "),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{attrs:{disabled:r.Status>=30},on:{click:function(a){return e.removeSingle(r)}}},[e._v("减员")]),t("a-menu-item",{on:{click:function(a){return e.reimbursement(r)}}},[e._v("社保享受")])],1)],1)],1)}},{key:"PaiDanDate",fn:function(a,r){return t("span",{},[e._v("\n            "+e._s(e.changeDate(r.PaiDanDate))+"\n        ")])}}])},[t("template",{slot:"footer"},[t("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2)],1)],1),t("drawer-person-remove",{attrs:{show:e.drawer.remove,refresh:e.refreshPage}}),t("drawer-person-detail",{attrs:{show:e.drawer.detail,refresh:e.refreshPage}}),t("drawer-person-edit",{attrs:{show:e.drawer.edit,refresh:e.refreshPage}}),t("drawer-reimbursement-add",{attrs:{show:e.drawer.ReimbursementAdd,refresh:e.refreshPage}})],1)},o=[],s=t("5176"),i=t.n(s),n=t("b775"),l=t("b00c"),c=t("3263"),u=t("bf8b"),d=t("6ea4"),m=(t("1c46"),t("dc65")),p=[{title:"员工姓名",scopedSlots:{customRender:"Pname"}},{title:"证件号码",dataIndex:"IDCard"},{title:"状态",scopedSlots:{customRender:"Status"}},{title:"社保",scopedSlots:{customRender:"ShebaoLabels"}},{title:"派单时间",scopedSlots:{customRender:"PaiDanDate"}},{title:"操作",scopedSlots:{customRender:"action"}}],h={components:{DrawerPersonDetail:c["default"],DrawerPersonRemove:u["default"],DrawerPersonEdit:d["default"],DrawerReimbursementAdd:m["default"]},data:function(){return{advanced:!0,columns:p,formSearch:{pageSize:10,current:1,total:0,ShebaoOrderStatus:0},dataSource:[],selectedRowKeys:[],selectedRows:[],drawer:{ReimbursementAdd:{show:!1},remove:{show:!1},detail:{show:!1,id:1},edit:{show:!1}},map:l["a"].EnumsOrder,ShebaoOrderStatus:[]}},activated:function(){var e=this;e.$route.params.type&&(e.formSearch.ShebaoOrderStatus=e.$route.params.type),this.pagechange(1),this.unselect()},created:function(){var e=this;e.init()},methods:{init:function(){var e=this;n["a"].post("/api/Dim/Enum/EnumDecode",{Names:["ShebaoOrderStatus"]}).then(function(a){var t=a;if(0===t.code){for(var r in t.data.ShebaoOrderStatus){var o={};o.key=r,o.text=t.data.ShebaoOrderStatus[r],e.ShebaoOrderStatus.push(o)}e.ShebaoOrderStatus.push({key:0,text:"全部"})}}).catch(function(e){console.log(e)})},initPage:function(){this.pagechange(1),this.unselect()},refreshPage:function(){this.pagechange(this.formSearch.current),this.unselect()},pagechange:function(e){var a=this;a.formSearch.current=e;var t=i()({},a.formSearch);0==t.ShebaoOrderStatus&&(t.ShebaoOrderStatus=""),n["a"].post("/api/Shebao/Order/List",t).then(function(e){var t=e;0===t.code&&(a.dataSource=t.data.rows,a.formSearch.total=t.data.count)}).catch(function(e){console.log(e)})},showaddDrawer:function(){this.drawer.add={show:!0}},remove:function(){this.drawer.remove={show:!0,selectedRows:this.selectedRows}},removeSingle:function(e){var a=[];a.push(e),this.drawer.remove={show:!0,selectedRows:a}},detail:function(e){this.drawer.detail={show:!0,id:e.key}},edit:function(e){this.drawer.edit={show:!0,id:e.key,persondetail:null}},unselect:function(){this.selectedRowKeys=[],this.selectedRows=[]},updateSelect:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},changeDate:function(e){return moment(e).format("YYYY-MM-DD")},reimbursement:function(e){this.drawer.ReimbursementAdd={show:!0,id:e.key,persondetail:e}}}},f=h,v=(t("55ba"),t("2877")),b=Object(v["a"])(f,r,o,!1,null,null,null);a["default"]=b.exports},"55ba":function(e,a,t){"use strict";var r=t("e3af"),o=t.n(r);o.a},"6ea4":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{attrs:{title:"增员",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"姓名",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["PName",{initialValue:e.visible.persondetail.PName,rules:e.AFormImportRules.PName}],expression:"['PName',{initialValue:visible.persondetail.PName,rules:AFormImportRules.PName  }]"}]})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"身份证号",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["IDCard",{initialValue:e.visible.persondetail.IDCard,rules:e.AFormImportRules.IDCard}],expression:"['IDCard',{initialValue:visible.persondetail.IDCard,rules:AFormImportRules.IDCard  }]"}],attrs:{disabled:null!=e.visible.id}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"手机号码",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Mobile",{initialValue:e.visible.persondetail.Mobile,rules:e.AFormImportRules.Mobile}],expression:"['Mobile',{initialValue:visible.persondetail.Mobile,rules:AFormImportRules.Mobile }]"}]})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"电子信箱",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Email",{initialValue:e.visible.persondetail.Email,rules:e.AFormImportRules.Email}],expression:"['Email',{initialValue:visible.persondetail.Email,rules:AFormImportRules.Email }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"参保城市",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["CityCode",{rules:e.AFormImportRules.CityCode}],expression:"['CityCode',{rules:AFormImportRules.CityCode }]"}],attrs:{placeholder:"请选择城市",allowClear:!0},on:{change:e.onCityChange}},e._l(e.dimCity,function(a){return t("a-select-option",{key:a.CityCode},[e._v(e._s(a.Value))])}),1)],1)],1),t("a-col",{attrs:{span:12}})],1),t("a-divider",{attrs:{dashed:""}},[e._v("社保信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"社保开始日期",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["SBBeginDate",{initialValue:e.visible.persondetail.SBBeginDate,rules:e.AFormImportRules.SBBeginDate}],expression:"['SBBeginDate',{initialValue: visible.persondetail.SBBeginDate,rules:AFormImportRules.SBBeginDate }]"}],attrs:{format:"YYYY-MM-DD"},on:{change:e.handleSBBeginDateSelectChange}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"工资",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Salary",{initialValue:e.visible.persondetail.Salary,rules:e.AFormImportRules.Salary}],expression:"['Salary',{initialValue: visible.persondetail.Salary,rules:AFormImportRules.Salary }]"}],attrs:{type:"number",step:"0.01"}})],1)],1)],1),t("a-divider",{attrs:{dashed:""}},[e._v("公积金信息")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"公积金开始日期",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["GJJBeginDate",{initialValue:e.visible.persondetail.GJJBeginDate,rules:e.AFormImportRules.GJJBeginDate}],expression:"['GJJBeginDate',{initialValue: visible.persondetail.GJJBeginDate,rules:AFormImportRules.GJJBeginDate }]"}],attrs:{format:"YYYY-MM-DD"},on:{change:e.handleGJJBeginDateSelectChange}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"公积金基数",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["GJJBase",{initialValue:e.visible.persondetail.GJJBase,rules:e.AFormImportRules.GJJBase}],expression:"['GJJBase',{initialValue: visible.persondetail.GJJBase,rules:AFormImportRules.GJJBase }]"}],attrs:{type:"number"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"公积金企业比例",labelCol:{span:10},wrapperCol:{span:14}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["GJJBili",{initialValue:e.visible.persondetail.gjjbili,rules:e.AFormImportRules.Bili}],expression:"['GJJBili',{initialValue: visible.persondetail.gjjbili,rules:AFormImportRules.Bili }]"}],attrs:{placeholder:"请选择比例",allowClear:!0}},[t("span",{staticStyle:{"font-weight":"600",color:"#aaa"},attrs:{slot:"suffixIcon"},slot:"suffixIcon"},[e._v("%")]),e._l(e.gjjBLdata,function(a){return t("a-select-option",{key:a.text},[e._v(e._s(a.text))])})],2)],1)],1),t("a-col",{attrs:{span:12}})],1),t("a-divider",{attrs:{dashed:""}},[e._v("备注")]),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remark",{initialValue:e.visible.persondetail.Remark}],expression:"['Remark',{initialValue:visible.persondetail.Remark }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),t("a-card",{staticClass:"markdown",attrs:{bordered:!1,title:"事项说明"}},[t("ul",[t("li",[t("span",{staticStyle:{color:"red"}},[e._v("增减员直接派送至客服与系统中增减员同时存在时，将以直接派送到客服的数据为准")])]),t("li",[e._v("系统中增减员派单与当地社保政策不符时，客服将与您沟通并修改派单信息")]),t("li",[e._v("系统中增员派单信息在客服受理前可自行修改，受理后若对派单信息做调整请联系专属客服")])])]),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),null==e.visible.id?t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){return e.handleSubmit("next")}}},[e._v("提交并继续增员")]):e._e()],1)],1)},o=[],s=(t("6b54"),t("7514"),t("28a5"),t("e814")),i=t.n(s),n=t("61f7"),l=t("c32d"),c=t.n(l),u=t("b775"),d=(t("1c46"),{props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,persondetail:{IDCard:"",PName:""}},dimCity:[],gjjBLdata:[],form:this.$form.createForm(this),AFormImportRules:{SBBeginDate:[{required:!0,transform:this.beginDate,message:"请社保开始日期"}],GJJBeginDate:[{required:!0,transform:this.beginDate,message:"请公积金开始日期"}],Salary:[{required:!0,message:"请输入工资"},{validator:this.checkPrice}],GJJBase:[{required:!0,message:"请输入公积金基数"},{validator:this.checkPrice}],PName:[{required:!0,message:"请输入姓名"}],IDCard:[{required:!0,message:"请输入身份证号"},{validator:this.handleConfirmIDCard}],Mobile:[{required:!0,message:"请输入手机号"},{validator:this.handleConfirmMobile}],Email:[{required:!1,message:"请输入电子信箱"},{type:"email",message:"邮箱格式不正确!"}],CityCode:[{required:!0,message:"请选择参保城市"}],Bili:[{required:!0,message:"请选择公积金比例"}]}}},watch:{visible:function(e,a){e.show&&null!=e.id?(null!=e.persondetail.SBBeginDate?e.persondetail.SBBeginDate=c()(e.persondetail.SBBeginDate):(this.AFormImportRules.SBBeginDate[0].required=!1,this.AFormImportRules.Salary[0].required=!1),null!=e.persondetail.GJJBeginDate?e.persondetail.GJJBeginDate=c()(e.persondetail.GJJBeginDate):(this.AFormImportRules.GJJBeginDate[0].required=!1,this.AFormImportRules.GJJBase[0].required=!1,this.AFormImportRules.Bili[0].required=!1),e.persondetail.GJJBiliC&&e.persondetail.GJJBiliP&&(e.persondetail.gjjbili=e.persondetail.GJJBiliC+"+"+e.persondetail.GJJBiliP)):(e.persondetail={CityCode:"1301"},this.AFormImportRules.SBBeginDate[0].required=!1,this.AFormImportRules.Salary[0].required=!1,this.AFormImportRules.GJJBeginDate[0].required=!1,this.AFormImportRules.GJJBase[0].required=!1,this.AFormImportRules.Bili[0].required=!1),this.onCityChange(e.persondetail.CityCode)},show:function(e,a){var t=this;e.show&&t.init(),null!=e.id&&null===e.persondetail?u["a"].post("/api/Shebao/Order/OrderDetail",{SBOrderGuid:e.id}).then(function(a){var r=a;0===r.code&&(e.persondetail=r.data.detail,t.visible=e)}).catch(function(e){console.log(e)}):t.visible=e}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;u["a"].post("/api/User/Service/ComServiceTree").then(function(a){var t=a;0===t.code&&(e.dimCity=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var a=this;this.form.validateFields(function(t,r){if(!t){var o=r;r.GJJBili&&(o.GJJBiliC=i()(r.GJJBili.split("+")[0]),o.GJJBiliP=i()(r.GJJBili.split("+")[1])),r.GJJBeginDate&&(o.GJJBeginDate=c()(r.GJJBeginDate).format("YYYY-MM-01")),r.SBBeginDate&&(o.SBBeginDate=c()(r.SBBeginDate).format("YYYY-MM-01")),u["a"].post("/api/Shebao/Order/Add",o).then(function(t){var r=t;r.code>0?a.$message.error(r.msg):("next"===e?(a.form.resetFields(),a.refresh&&a.refresh()):a.onClose(),a.$message.success(r.msg))}).catch(function(e){console.log(e)})}})},handleGJJBeginDateSelectChange:function(e,a){e?(this.AFormImportRules.GJJBeginDate[0].required=!0,this.AFormImportRules.GJJBase[0].required=!0,this.AFormImportRules.Bili[0].required=!0):this.visible.persondetail.GJJBeginDate||(this.AFormImportRules.GJJBeginDate[0].required=!1,this.AFormImportRules.GJJBase[0].required=!1,this.AFormImportRules.Bili[0].required=!1),this.form.setFieldsValue({GJJBase:this.form.getFieldValue("GJJBase")}),this.form.setFieldsValue({GJJBili:this.form.getFieldValue("GJJBili")})},handleSBBeginDateSelectChange:function(e){e?(this.AFormImportRules.Salary[0].required=!0,this.AFormImportRules.SBBeginDate[0].required=!0):this.visible.persondetail.SBBeginDate||(this.AFormImportRules.Salary[0].required=!1,this.AFormImportRules.SBBeginDate[0].required=!1),this.form.setFieldsValue({Salary:this.form.getFieldValue("Salary")})},handleConfirmIDCard:function(e,a,t){!a||Object(n["a"])(a)?t():t("身份证号不符合规则！")},handleConfirmMobile:function(e,a,t){!a||Object(n["b"])(a)?t():t("手机号码不符合规则！")},checkPrice:function(e,a,t){var r=/^[0-9]*\.?[0-9]{0,2}$/;!a||a>0&&r.test(a)?t():t("为空或者大于零且小数最多两位")},filter:function(e,a){return a.some(function(a){return a.label.toLowerCase().indexOf(e.toLowerCase())>-1})},onCityChange:function(e,a){var t=this;u["a"].post("/api/User/Service/GJJBili",{CityCode:e}).then(function(e){var r=e;if(0===r.code&&(t.gjjBLdata=r.data.bili,a)){var o=t.gjjBLdata.find(function(e){return e.text===t.form.getFieldValue("GJJBili")});o?t.form.setFieldsValue({GJJBili:t.form.getFieldValue("GJJBili")}):t.form.setFieldsValue({GJJBili:void 0})}}).catch(function(e){console.log(e)})},beginDate:function(e){if(e){var a=e.startOf("month").toString();return a}}}}),m=d,p=t("2877"),h=Object(p["a"])(m,r,o,!1,null,null,null);a["default"]=h.exports},"896c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{attrs:{title:"新增银行账户",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:400}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form}},[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"账号类型",labelCol:{span:7},wrapperCol:{span:17}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BankAccountType",{rules:e.AFormImportRules.inpSelect}],expression:"['BankAccountType',{rules:AFormImportRules.inpSelect}]"}],attrs:{allowClear:!0}},e._l(e.visible.PaymentTo,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"银行名称",labelCol:{span:7},wrapperCol:{span:17}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["BankAccountName",{rules:e.AFormImportRules.input}],expression:"['BankAccountName',{rules:AFormImportRules.input}]"}]})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"开户行",labelCol:{span:7},wrapperCol:{span:17}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["BankName",{rules:e.AFormImportRules.input}],expression:"['BankName',{rules:AFormImportRules.input}]"}]})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"账号",labelCol:{span:7},wrapperCol:{span:17}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["BankAccount",{rules:e.AFormImportRules.input}],expression:"['BankAccount',{rules:AFormImportRules.input}]"}]})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:{span:7},wrapperCol:{span:17}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{rules:e.AFormImportRules.Remark}],expression:"['Remarks',{rules:AFormImportRules.Remark }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],s=(t("61f7"),t("c32d"),t("b775")),i=(t("1c46"),{props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,persondetail:{IDCard:"",PName:""},PGUID:""},dimCity:[],gjjBLdata:[],form:this.$form.createForm(this),AFormImportRules:{input:[{required:!0,message:"请输入"}],inpSelect:[{required:!0,message:"请选择"}],Remark:[{required:!1,message:""}]}}},watch:{visible:function(e,a){},show:function(e,a){var t=this;e.show&&(t.init(),t.visible=e)}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){},handleSubmit:function(e){var a=this;this.form.validateFields(function(t,r){if(!t){var o=r;"10"==r.BankAccountType&&(o.PGUID=a.visible.PGUID),s["a"].post("/api/Other/BankAccountInfo/Add",o).then(function(t){var r=t;r.code>0?a.$message.error(r.msg):("next"===e?(a.form.resetFields(),a.refresh&&a.refresh()):a.onClose(),a.$message.success(r.msg))}).catch(function(e){console.log(e)})}})}}}),n=i,l=t("2877"),c=Object(l["a"])(n,r,o,!1,null,null,null);a["default"]=c.exports},b335:function(e,a,t){},dc65:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{attrs:{title:"申请社保享受",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:550}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form}},[e.visible.persondetail.IDCard?[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"身份证号",labelCol:{span:6},wrapperCol:{span:18}}},[e._v("\n            "+e._s(e.visible.persondetail.IDCard)+"\n          ")])],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"姓名",labelCol:{span:6},wrapperCol:{span:18}}},[e._v("\n            "+e._s(e.visible.persondetail.PName)+"\n          ")])],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"联系信息",labelCol:{span:6},wrapperCol:{span:18}}},[e._v("\n            "+e._s(e.visible.persondetail.rzMobile)+"\n          ")])],1)],1)]:[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"身份证号",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-select",{attrs:{"show-search":"",placeholder:"请输入身份证号搜索","show-arrow":!1,"filter-option":!1,value:e.IDCard},on:{search:e.searchPerson,select:e.handleChange,blur:e.blurSearch}},e._l(e.invoice,function(a){return t("a-select-option",{key:a.key},[e._v("\n                "+e._s(a.PName)+" ("+e._s(e.ShebaoOrderStatus[a.Status])+")\n              ")])}),1),e.checkIDcard?t("div",{staticClass:"checkText"},[e._v(e._s(e.checkIDcard))]):e._e()],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"姓名",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["PName",{initialValue:e.selectInvoice.PName}],expression:"['PName',{initialValue:selectInvoice.PName,}]"}],attrs:{readOnly:e.read}})],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"联系信息",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["PName",{initialValue:e.selectInvoice.rzMobile}],expression:"['PName',{initialValue:selectInvoice.rzMobile,}]"}],attrs:{readOnly:e.read}})],1)],1)],1)],t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"社保报销类型",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BXClassCode",{rules:e.AFormImportRules.inpSelect}],expression:"['BXClassCode',{rules:AFormImportRules.inpSelect }]"}],attrs:{allowClear:!0,disabled:!e.selectInvoice.key},on:{change:e.BXclassChange}},e._l(e.BXClass,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1),e.BXClassCode.length>0?t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"报销类型子类",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BXSubClassCode",{rules:e.AFormImportRules.inpSelect}],expression:"['BXSubClassCode',{rules:AFormImportRules.inpSelect }]"}],attrs:{allowClear:!0,disabled:!e.selectInvoice.key},on:{change:e.BXsubChange}},e._l(e.BXClassCode,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1):e._e()],1),21!=e.searchCailiao.BXClassCode&&22!=e.searchCailiao.BXClassCode?t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"发生城市",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["EventCityCode",{rules:e.AFormImportRules.inpSelect}],expression:"['EventCityCode',{rules:AFormImportRules.inpSelect }]"}],attrs:{options:e.options,placeholder:"请选择",allowClear:!1,disabled:!e.selectInvoice.key},on:{change:e.onChange}})],1)],1)],1):e._e(),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"需要准备材料",labelCol:{span:6},wrapperCol:{span:18}}},[e.baoxiaoCailiao&&!!e.baoxiaoCailiao.length>0?[t("p",{staticClass:"cailiao"},e._l(e.baoxiaoCailiao,function(a){return t("span",{key:a.BXCLItemGuid},[e._v(e._s(a.OrderNo+"."+a.CailiaoName))])}),0)]:[e._v("\n                "+e._s(e.baoxiaoMsg)+"\n            ")]],2)],1)],1),10==e.serviceType?[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"付款方向",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["PaymentTo",{rules:e.AFormImportRules.inpSelect}],expression:"['PaymentTo',{rules:AFormImportRules.inpSelect }]"}],attrs:{allowClear:!0,disabled:!e.selectInvoice.key},on:{change:e.paymentChange}},e._l(e.PaymentTo,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1)],1),t("a-row",[t("a-col",{attrs:{span:18}},[t("a-form-item",{attrs:{label:"银行账户信息",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BankAccountInfoGuid",{rules:e.AFormImportRules.inpSelect}],expression:"['BankAccountInfoGuid',{rules:AFormImportRules.inpSelect }]"}],attrs:{allowClear:!0,disabled:!e.selectInvoice.key}},e._l(e.bankAccountList,function(a){return t("a-select-option",{key:a.BankAccountInfoGuid},[e._v(e._s(a.BankAccountName)+"--"+e._s(a.BankAccount)+"--"+e._s(a.BankName))])}),1)],1)],1),t("a-col",{attrs:{span:6}},[t("a-button",{staticStyle:{margin:"4px 0 0 10px"},attrs:{type:"primary"},on:{click:e.newBankAccount}},[e._v("新增账户")])],1)],1)]:e._e(),t("a-row",[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{rules:e.AFormImportRules.Remark}],expression:"['Remarks',{rules:AFormImportRules.Remark }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],2)],1),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1),t("drawer-add-account",{attrs:{show:e.drawer.addaccount,refresh:e.refreshPaymentChange}})],1)},o=[],s=(t("ac6a"),t("61f7")),i=(t("c32d"),t("b775")),n=t("896c"),l=(t("1c46"),{components:{DrawerAddAccount:n["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,persondetail:{IDCard:"",PName:""}},dimCity:[],gjjBLdata:[],form:this.$form.createForm(this),AFormImportRules:{inpSelect:[{required:!0,message:"请选择"}],inpSelectNo:[{required:!1,message:"请选择"}],Remark:[{required:!1,message:"请选择"}],IDCard:[{required:!0,message:"请输入身份证号"},{validator:this.handleConfirmIDCard}],Mobile:[{required:!0,message:"请输入手机号"},{validator:this.handleConfirmMobile}],Email:[{required:!1,message:"请输入电子信箱"},{type:"email",message:"邮箱格式不正确!"}]},CityCode:[{required:!0,message:"请选择参保城市"}],idCardValue:"",invoice:[],IDCard:"",selectInvoice:{},BXClass:[],BXClassCode:[],options:[],PaymentTo:[],bankAccountList:[],drawer:{addaccount:{show:!1},paymentType:""},checkIDcard:"",searchCailiao:{RLZGUID:"",BXClassCode:"",BXSubClassCode:"",EventCityCode:""},baoxiaoCailiao:[],baoxiaoMsg:"",read:!0,serviceType:""}},watch:{visible:function(e,a){},show:function(e,a){var t=this;e.show&&(t.init(),t.visible=e,t.selectInvoice=t.visible.persondetail)}},methods:{onClose:function(){this.visible.show=!1,this.IDCard="",this.options=[],this.bankAccountList=[],this.paymentType="",this.PaymentTo=[],this.checkIDcard="",this.BXClass=[],this.BXClassCode=[],this.baoxiaoCailiao=[],this.baoxiaoMsg="",this.invoice=[],this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;console.log(!!e.selectInvoice.key),i["a"].post("/api/Dim/Enum/GetDim",{Names:["BXClass"]}).then(function(a){0===a.code&&(e.BXClass=a.data.BXClass)}).catch(function(e){console.log(e)}),i["a"].post("/api/Dim/Enum/ProvinceCityTree",{Names:["ProvinceCityTree"]}).then(function(a){0===a.code&&(e.options=a.data.tree)}).catch(function(e){console.log(e)}),i["a"].post("/api/Dim/Enum/EnumDecode",{Names:["ShebaoOrderStatus"]}).then(function(a){var t=a;0===t.code&&(e.ShebaoOrderStatus=t.data.ShebaoOrderStatus)}).catch(function(e){console.log(e)}),i["a"].post("/api/Dim/Enum/GetEnum",{Names:["PaymentTo"]}).then(function(a){var t=a;0===t.code&&(e.PaymentTo=t.data.PaymentTo)}).catch(function(e){console.log(e)}),i["a"].post("/api/Other/Com/Info",{}).then(function(a){var t=a;0===t.code&&(e.serviceType=t.data.com.ServiceType)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var a=this;a.selectInvoice.key?this.form.validateFields(function(e,t){if(!e){var r=t;r.RLZGUID=a.selectInvoice.key,r.LinkInfo=a.selectInvoice.rzMobile,t.EventCityCode.length>0&&(r.EventCityCode=t.EventCityCode[t.EventCityCode.length-1]),i["a"].post("/api/Shebao/Baoxiao/Add",r).then(function(e){var t=e;t.code>0?a.$message.error(t.msg):(a.onClose(),a.$message.success(t.msg))}).catch(function(e){console.log(e)})}}):a.$message.error("请先输入身份证号选择员工")},handleConfirmIDCard:function(e,a,t){!a||Object(s["a"])(a)?t():t("身份证号不符合规则！")},handleConfirmMobile:function(e,a,t){!a||Object(s["b"])(a)?t():t("手机号码不符合规则！")},filter:function(e,a){return a.some(function(a){return a.label.toLowerCase().indexOf(e.toLowerCase())>-1})},onCityChange:function(e,a){},searchPerson:function(e){var a=this;a.IDCard=e,e&&Object(s["a"])(e)?i["a"].post("/api/Shebao/Order/List",{pageSize:10,current:1,total:0,IDCard:e}).then(function(e){var t=e;0===t.code&&(0==t.data.count?(a.checkIDcard="没有该员工",a.selectInvoice={}):(a.invoice=t.data.rows,a.checkIDcard=""))}).catch(function(e){console.log(e)}):a.invoice=[]},blurSearch:function(e){!e||Object(s["a"])(e)?this.checkIDcard="":(this.checkIDcard="身份证号不符合规则！",this.invoice=[])},handleChange:function(e){var a=this;this.invoice.forEach(function(t,r){t.key==e&&(a.selectInvoice=t)})},BXclassChange:function(e){var a=this;a.searchCailiao.BXClassCode=e,"21"!=e&&"22"!=e||(a.searchCailiao.EventCityCode=""),i["a"].post("/api/Dim/Enum/GetBXSubClass",{BXClassCode:e}).then(function(e){var t=e;0===t.code&&(a.BXClassCode=t.data.bxsubclass,a.searchCailiao.BXSubClassCode="",a.form.resetFields("BXSubClassCode",""),a.searchCailiaoFun())}).catch(function(e){console.log(e)})},BXsubChange:function(e){var a=this;a.searchCailiao.BXSubClassCode=e,a.searchCailiaoFun()},onChange:function(e){var a=this;e.length>0&&(a.searchCailiao.EventCityCode=e[e.length-1]),a.searchCailiaoFun()},searchCailiaoFun:function(){var e=this;if(!e.selectInvoice.key)return e.$message.error("请先输入身份证号选择员工"),void(e.baoxiaoMsg="请先输入身份证号选择员工");e.searchCailiao.RLZGUID=e.selectInvoice.key,i["a"].post("/api/Other/BaoxiaoCailiao/Find",e.searchCailiao).then(function(a){var t=a;0===t.code?(e.baoxiaoCailiao=t.data.rows,0==t.data.rows.length?e.baoxiaoMsg="此享受项目未找到材料名录，请等待客户电话沟通":e.baoxiaoMsg=""):(e.baoxiaoCailiao="",e.baoxiaoMsg=t.msg)}).catch(function(e){console.log(e)})},paymentChange:function(e){var a=this,t={};a.bankAccountList=[],a.paymentType=e,t="10"==a.paymentType?{BankAccountType:a.paymentType,PGUID:a.selectInvoice.PGUID,pageSize:50,current:1}:{BankAccountType:a.paymentType,pageSize:50,current:1},i["a"].post("/api/Other/BankAccountInfo/List",t).then(function(e){var t=e;0===t.code?(a.bankAccountList=t.data.rows,a.form.resetFields("BankAccountInfoGuid","")):a.$message.error(t.msg)}).catch(function(e){console.log(e)})},refreshPaymentChange:function(){var e=this,a={};e.bankAccountList=[],a="10"==e.paymentType?{BankAccountType:e.paymentType,PGUID:e.selectInvoice.PGUID,pageSize:50,current:1}:{BankAccountType:e.paymentType,pageSize:50,current:1},i["a"].post("/api/Other/BankAccountInfo/List",a).then(function(a){var t=a;0===t.code&&(e.bankAccountList=t.data.rows)}).catch(function(e){console.log(e)})},newBankAccount:function(){this.drawer.addaccount={show:!0,PaymentTo:this.PaymentTo,PGUID:this.selectInvoice.PGUID}}}}),c=l,u=(t("1b15"),t("2877")),d=Object(u["a"])(c,r,o,!1,null,"1a578040",null);a["default"]=d.exports},e3af:function(e,a,t){}}]);